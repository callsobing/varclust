


var eur = ["HG00096","HG00097","HG00098","HG00099","HG00100","HG00101","HG00102","HG00103","HG00104","HG00105","HG00106","HG00107","HG00108","HG00109","HG00110","HG00111","HG00112","HG00113","HG00114","HG00115","HG00116","HG00117","HG00118","HG00119","HG00120","HG00121","HG00122","HG00123","HG00124","HG00125","HG00126","HG00127","HG00128","HG00129","HG00130","HG00131","HG00132","HG00133","HG00134","HG00135","HG00136","HG00137","HG00138","HG00139","HG00140","HG00141","HG00142","HG00143","HG00144","HG00145","HG00146","HG00147","HG00148","HG00149","HG00150","HG00151","HG00152","HG00153","HG00154","HG00155","HG00156","HG00157","HG00158","HG00159","HG00160","HG00171","HG00173","HG00174","HG00176","HG00177","HG00178","HG00179","HG00180","HG00181","HG00182","HG00183","HG00185","HG00186","HG00187","HG00188","HG00189","HG00190","HG00231","HG00232","HG00233","HG00234","HG00235","HG00236","HG00237","HG00238","HG00239","HG00240","HG00242","HG00243","HG00244","HG00245","HG00246","HG00247","HG00248","HG00249","HG00250","HG00251","HG00252","HG00253","HG00254","HG00255","HG00256","HG00257","HG00258","HG00259","HG00260","HG00261","HG00262","HG00263","HG00264","HG00265","HG00266","HG00267","HG00268","HG00269","HG00270","HG00271","HG00272","HG00273","HG00274","HG00275","HG00276","HG00277","HG00278","HG00280","HG00281","HG00282","HG00284","HG00285","HG00288","HG00290","HG00302","HG00303","HG00304","HG00306","HG00308","HG00309","HG00310","HG00311","HG00312","HG00313","HG00315","HG00318","HG00319","HG00320","HG00321","HG00323","HG00324","HG00325","HG00326","HG00327","HG00328","HG00329","HG00330","HG00331","HG00332","HG00334","HG00335","HG00336","HG00337","HG00338","HG00339","HG00341","HG00342","HG00343","HG00344","HG00345","HG00346","HG00349","HG00350","HG00351","HG00353","HG00355","HG00356","HG00357","HG00358","HG00359","HG00360","HG00361","HG00362","HG00364","HG00365","HG00366","HG00367","HG00368","HG00369","HG00371","HG00372","HG00373","HG00375","HG00376","HG00377","HG00378","HG00379","HG00380","HG00381","HG00382","HG00383","HG00384","HG01334","HG01500","HG01501","HG01502","HG01503","HG01504","HG01505","HG01506","HG01507","HG01508","HG01509","HG01510","HG01511","HG01512","HG01513","HG01514","HG01515","HG01516","HG01517","HG01518","HG01519","HG01520","HG01521","HG01522","HG01523","HG01524","HG01525","HG01526","HG01527","HG01528","HG01529","HG01530","HG01531","HG01532","HG01536","HG01537","HG01538","HG01601","HG01602","HG01603","HG01604","HG01605","HG01606","HG01607","HG01608","HG01609","HG01610","HG01611","HG01612","HG01613","HG01614","HG01615","HG01616","HG01617","HG01618","HG01619","HG01620","HG01621","HG01622","HG01623","HG01624","HG01625","HG01626","HG01627","HG01628","HG01629","HG01630","HG01631","HG01632","HG01633","HG01667","HG01668","HG01669","HG01670","HG01671","HG01672","HG01673","HG01674","HG01675","HG01676","HG01677","HG01678","HG01679","HG01680","HG01681","HG01682","HG01683","HG01684","HG01685","HG01686","HG01687","HG01694","HG01695","HG01696","HG01697","HG01698","HG01699","HG01700","HG01701","HG01702","HG01703","HG01704","HG01705","HG01706","HG01707","HG01708","HG01709","HG01710","HG01711","HG01746","HG01747","HG01748","HG01755","HG01756","HG01757","HG01761","HG01762","HG01763","HG01764","HG01765","HG01766","HG01767","HG01768","HG01769","HG01770","HG01771","HG01772","HG01773","HG01774","HG01775","HG01776","HG01777","HG01778","HG01779","HG01780","HG01781","HG01782","HG01783","HG01784","HG01785","HG01786","HG01787","HG01789","HG01790","HG01791","HG02215","HG02217","HG02218","HG02219","HG02220","HG02221","HG02222","HG02223","HG02224","HG02225","HG02229","HG02230","HG02231","HG02232","HG02233","HG02234","HG02235","HG02236","HG02237","HG02238","HG02239","HG02240","HG04301","HG04302","HG04303","NA06984","NA06985","NA06986","NA06989","NA06991","NA06993","NA06994","NA06995","NA06997","NA07000","NA07014","NA07019","NA07022","NA07029","NA07031","NA07034","NA07037","NA07045","NA07048","NA07051","NA07055","NA07056","NA07340","NA07345","NA07346","NA07347","NA07348","NA07349","NA07357","NA07435","NA10830","NA10831","NA10835","NA10836","NA10837","NA10838","NA10839","NA10840","NA10842","NA10843","NA10845","NA10846","NA10847","NA10850","NA10851","NA10852","NA10853","NA10854","NA10855","NA10856","NA10857","NA10859","NA10860","NA10861","NA10863","NA10864","NA10865","NA11829","NA11830","NA11831","NA11832","NA11839","NA11840","NA11843","NA11881","NA11882","NA11891","NA11892","NA11893","NA11894","NA11917","NA11918","NA11919","NA11920","NA11930","NA11931","NA11932","NA11933","NA11992","NA11993","NA11994","NA11995","NA12003","NA12004","NA12005","NA12006","NA12043","NA12044","NA12045","NA12046","NA12056","NA12057","NA12058","NA12144","NA12145","NA12146","NA12154","NA12155","NA12156","NA12234","NA12239","NA12248","NA12249","NA12264","NA12272","NA12273","NA12274","NA12275","NA12282","NA12283","NA12286","NA12287","NA12329","NA12335","NA12336","NA12340","NA12341","NA12342","NA12343","NA12344","NA12347","NA12348","NA12375","NA12376","NA12383","NA12386","NA12399","NA12400","NA12413","NA12414","NA12485","NA12489","NA12546","NA12707","NA12708","NA12716","NA12717","NA12718","NA12739","NA12740","NA12748","NA12749","NA12750","NA12751","NA12752","NA12753","NA12760","NA12761","NA12762","NA12763","NA12766","NA12767","NA12775","NA12776","NA12777","NA12778","NA12801","NA12802","NA12812","NA12813","NA12814","NA12815","NA12817","NA12818","NA12827","NA12828","NA12829","NA12830","NA12832","NA12842","NA12843","NA12864","NA12865","NA12872","NA12873","NA12874","NA12875","NA12877","NA12878","NA12889","NA12890","NA12891","NA12892","NA20502","NA20503","NA20504","NA20505","NA20506","NA20507","NA20508","NA20509","NA20510","NA20511","NA20512","NA20513","NA20514","NA20515","NA20516","NA20517","NA20518","NA20519","NA20520","NA20521","NA20522","NA20524","NA20525","NA20526","NA20527","NA20528","NA20529","NA20530","NA20531","NA20532","NA20533","NA20534","NA20535","NA20536","NA20537","NA20538","NA20539","NA20540","NA20541","NA20542","NA20543","NA20544","NA20581","NA20582","NA20585","NA20586","NA20587","NA20588","NA20589","NA20752","NA20753","NA20754","NA20755","NA20756","NA20757","NA20758","NA20759","NA20760","NA20761","NA20762","NA20763","NA20764","NA20765","NA20766","NA20767","NA20768","NA20769","NA20770","NA20771","NA20772","NA20773","NA20774","NA20775","NA20778","NA20783","NA20785","NA20786","NA20787","NA20790","NA20792","NA20795","NA20796","NA20797","NA20798","NA20799","NA20800","NA20801","NA20802","NA20803","NA20804","NA20805","NA20806","NA20807","NA20808","NA20809","NA20810","NA20811","NA20812","NA20813","NA20814","NA20815","NA20816","NA20818","NA20819","NA20821","NA20822","NA20826","NA20827","NA20828","NA20829","NA20831","NA20832"];
var sas = ["HG01583","HG01586","HG01589","HG01590","HG01593","HG01594","HG02490","HG02491","HG02492","HG02493","HG02494","HG02495","HG02597","HG02599","HG02600","HG02601","HG02602","HG02603","HG02604","HG02605","HG02648","HG02649","HG02650","HG02651","HG02652","HG02653","HG02654","HG02655","HG02656","HG02657","HG02658","HG02659","HG02660","HG02661","HG02662","HG02681","HG02682","HG02683","HG02684","HG02685","HG02686","HG02687","HG02688","HG02689","HG02690","HG02691","HG02692","HG02694","HG02696","HG02697","HG02698","HG02699","HG02700","HG02701","HG02724","HG02725","HG02726","HG02727","HG02728","HG02729","HG02731","HG02733","HG02734","HG02735","HG02736","HG02737","HG02738","HG02774","HG02775","HG02776","HG02778","HG02779","HG02780","HG02781","HG02783","HG02784","HG02785","HG02786","HG02787","HG02788","HG02789","HG02790","HG02791","HG02792","HG02793","HG02794","HG03006","HG03007","HG03008","HG03009","HG03012","HG03015","HG03016","HG03017","HG03018","HG03019","HG03021","HG03022","HG03023","HG03228","HG03229","HG03230","HG03234","HG03235","HG03236","HG03237","HG03238","HG03239","HG03487","HG03488","HG03489","HG03490","HG03491","HG03492","HG03585","HG03587","HG03589","HG03590","HG03593","HG03594","HG03595","HG03596","HG03598","HG03599","HG03600","HG03602","HG03603","HG03604","HG03605","HG03606","HG03607","HG03611","HG03615","HG03616","HG03617","HG03618","HG03619","HG03620","HG03621","HG03624","HG03625","HG03626","HG03629","HG03631","HG03633","HG03634","HG03635","HG03636","HG03638","HG03639","HG03640","HG03641","HG03642","HG03643","HG03644","HG03645","HG03646","HG03649","HG03650","HG03651","HG03652","HG03653","HG03654","HG03656","HG03657","HG03660","HG03663","HG03667","HG03668","HG03669","HG03672","HG03673","HG03679","HG03680","HG03681","HG03682","HG03683","HG03684","HG03685","HG03686","HG03687","HG03688","HG03689","HG03690","HG03691","HG03692","HG03693","HG03694","HG03695","HG03696","HG03697","HG03698","HG03699","HG03700","HG03701","HG03702","HG03703","HG03704","HG03705","HG03706","HG03707","HG03708","HG03709","HG03710","HG03711","HG03713","HG03714","HG03715","HG03716","HG03717","HG03718","HG03719","HG03720","HG03721","HG03722","HG03723","HG03725","HG03727","HG03729","HG03730","HG03731","HG03732","HG03733","HG03736","HG03738","HG03740","HG03741","HG03742","HG03743","HG03744","HG03745","HG03746","HG03750","HG03752","HG03753","HG03754","HG03755","HG03756","HG03757","HG03760","HG03761","HG03762","HG03763","HG03765","HG03766","HG03767","HG03769","HG03770","HG03771","HG03772","HG03773","HG03774","HG03775","HG03777","HG03778","HG03779","HG03780","HG03781","HG03782","HG03783","HG03784","HG03785","HG03786","HG03787","HG03788","HG03789","HG03790","HG03792","HG03793","HG03794","HG03795","HG03796","HG03797","HG03798","HG03799","HG03800","HG03801","HG03802","HG03803","HG03804","HG03805","HG03806","HG03807","HG03808","HG03809","HG03811","HG03812","HG03813","HG03814","HG03815","HG03816","HG03817","HG03821","HG03822","HG03823","HG03824","HG03825","HG03826","HG03829","HG03830","HG03831","HG03832","HG03833","HG03834","HG03835","HG03836","HG03837","HG03838","HG03840","HG03842","HG03844","HG03845","HG03846","HG03847","HG03848","HG03849","HG03850","HG03851","HG03854","HG03856","HG03857","HG03858","HG03861","HG03862","HG03863","HG03864","HG03866","HG03867","HG03868","HG03869","HG03870","HG03871","HG03872","HG03873","HG03874","HG03875","HG03876","HG03879","HG03882","HG03884","HG03885","HG03886","HG03887","HG03888","HG03890","HG03894","HG03895","HG03896","HG03897","HG03898","HG03899","HG03900","HG03901","HG03902","HG03903","HG03904","HG03905","HG03906","HG03907","HG03908","HG03909","HG03910","HG03911","HG03913","HG03914","HG03915","HG03916","HG03917","HG03919","HG03920","HG03922","HG03924","HG03925","HG03926","HG03927","HG03928","HG03929","HG03930","HG03931","HG03934","HG03937","HG03939","HG03940","HG03941","HG03942","HG03943","HG03944","HG03945","HG03947","HG03948","HG03949","HG03950","HG03951","HG03953","HG03955","HG03960","HG03963","HG03965","HG03967","HG03968","HG03969","HG03971","HG03972","HG03973","HG03974","HG03976","HG03977","HG03978","HG03982","HG03985","HG03986","HG03988","HG03989","HG03990","HG03991","HG03992","HG03995","HG03998","HG03999","HG04001","HG04002","HG04003","HG04006","HG04014","HG04015","HG04017","HG04018","HG04019","HG04020","HG04022","HG04023","HG04024","HG04025","HG04026","HG04029","HG04033","HG04035","HG04036","HG04037","HG04038","HG04039","HG04040","HG04042","HG04047","HG04050","HG04053","HG04054","HG04055","HG04056","HG04058","HG04059","HG04060","HG04061","HG04062","HG04063","HG04067","HG04070","HG04075","HG04076","HG04080","HG04090","HG04093","HG04094","HG04096","HG04098","HG04099","HG04100","HG04106","HG04107","HG04114","HG04115","HG04118","HG04122","HG04127","HG04128","HG04131","HG04132","HG04133","HG04134","HG04135","HG04136","HG04140","HG04141","HG04142","HG04144","HG04146","HG04147","HG04148","HG04149","HG04150","HG04151","HG04152","HG04153","HG04155","HG04156","HG04157","HG04158","HG04159","HG04160","HG04161","HG04162","HG04164","HG04171","HG04173","HG04174","HG04175","HG04176","HG04177","HG04180","HG04181","HG04182","HG04183","HG04184","HG04185","HG04186","HG04187","HG04188","HG04189","HG04191","HG04192","HG04193","HG04194","HG04195","HG04197","HG04198","HG04199","HG04200","HG04202","HG04204","HG04206","HG04208","HG04209","HG04210","HG04211","HG04212","HG04214","HG04215","HG04216","HG04217","HG04219","HG04222","HG04225","HG04227","HG04228","HG04229","HG04235","HG04238","HG04239","NA20845","NA20846","NA20847","NA20849","NA20850","NA20851","NA20852","NA20853","NA20854","NA20856","NA20858","NA20859","NA20861","NA20862","NA20863","NA20864","NA20866","NA20867","NA20868","NA20869","NA20870","NA20871","NA20872","NA20873","NA20874","NA20875","NA20876","NA20877","NA20878","NA20879","NA20881","NA20882","NA20883","NA20884","NA20885","NA20886","NA20887","NA20888","NA20889","NA20890","NA20891","NA20892","NA20893","NA20894","NA20895","NA20896","NA20897","NA20898","NA20899","NA20900","NA20901","NA20902","NA20903","NA20904","NA20905","NA20906","NA20907","NA20908","NA20909","NA20910","NA20911","NA21086","NA21087","NA21088","NA21089","NA21090","NA21091","NA21092","NA21093","NA21094","NA21095","NA21097","NA21098","NA21099","NA21100","NA21101","NA21102","NA21103","NA21104","NA21105","NA21106","NA21107","NA21108","NA21109","NA21110","NA21111","NA21112","NA21113","NA21114","NA21115","NA21116","NA21117","NA21118","NA21119","NA21120","NA21121","NA21122","NA21123","NA21124","NA21125","NA21126","NA21127","NA21128","NA21129","NA21130","NA21133","NA21134","NA21135","NA21137","NA21141","NA21142","NA21143","NA21144"];

var radius = 960 / 2;

var cluster = d3.layout.cluster()
    .size([360, radius - 120 ]);

// define div for tooltip
var div = d3.select("body").append("div")
    .attr("class", "tooltip")
    .style("opacity", 0);

var diagonal = d3.svg.diagonal.radial()
    .projection(function(d) { return [d.y, d.x / 180 * Math.PI]; });

var svg = d3.select("body").append("svg")
    .attr("width", radius * 2)
    .attr("height", radius * 2)
    .append("g")
    .attr("transform", "translate(" + radius + "," + radius + ")");



d3.json("/Users/yat/PycharmProjects/C4lab/VariantBasedSampleClustering/resource/1kg.json", function(error, root) {
    if (error) throw error;

    var nodes = cluster.nodes(root);

    var link = svg.selectAll("path.link")
        .data(cluster.links(nodes))
        .enter().append("path")
        .attr("class", "link")
        .attr("d", diagonal);

    var node = svg.selectAll("g.node")
        .data(nodes)
        .enter().append("g")
        .attr("class", "node")
        .attr("transform", function(d) { return "rotate(" + (d.x - 90) + ")translate(" + d.y + ")"; })

    node.append("ellipse")
        .attr("rx", function (d) { if (d.name == '') { return 0} else {return 20.0}; })
        .attr("ry", function (d) { if (d.name == '') { return 0} else {return 0.2}; })
        .style("fill", function (d) {
            if (afr.indexOf(d.name) != -1) { return '#D7F9F1'}
            else if (amr.indexOf(d.name) != -1) { return '#7AA095'}
            else if (eur.indexOf(d.name) != -1) { return '#40531B'}
            else if (eas.indexOf(d.name) != -1) { return '#618B4A'}
            else if (sas.indexOf(d.name) != -1) { return '#AFBC88'}
            else {return '#CCCCCC'};})
        .style("stroke", function (d) {
            if (afr.indexOf(d.name) != -1) { return '#D7F9F1'}
            else if (amr.indexOf(d.name) != -1) { return '#7AA095'}
            else if (eur.indexOf(d.name) != -1) { return '#40531B'}
            else if (eas.indexOf(d.name) != -1) { return '#618B4A'}
            else if (sas.indexOf(d.name) != -1) { return '#AFBC88'}
            else {return '#CCCCCC'};})
        .on("mouseover", function(d) {
            div .transition()
                .duration(2)
                .style("opacity", .9);
            div .html(d.name + "<br/>"  + d.popcode)
                .style("left", (d3.event.pageX) + "px")
                .style("top", (d3.event.pageY - 28) + "px");	;
        })
        .on("mouseout", function(d) {
            div .transition()
                .duration(500)
                .style("opacity", 0);
        });

    node.append("text").attr("dy", ".31em")
        .attr("text-anchor", function(d) { return d.x < 180 ? "start" : "end"; })
        .attr("transform", function(d) { return d.x < 180 ? "translate(8)" : "rotate(180)translate(-8)"; })
    ;

});

d3.select(self.frameElement).style("height", radius * 2 + "px");
